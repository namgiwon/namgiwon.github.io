---
layout: post
title: 스프링 부트 @Transactional 삽질
tags:
  - @Transactional
  - spring boot
  - mysql
---

* 스트링 부트에 generate-ddl: true 로 설정해 놓고 테스트 하고 있었음.

* 트랜잭션을 적용해야 하는 로직이 있어서 @Transactional을 적용했는데 테스트 결과 롤백이 되지 않음.

* 코드에 문제가 있어서 그런줄 알고 트랜잭션 메니저를 삽입하는 등 온갖 방법을 써 봤음.

* 세 시간 정도 삽질 후 테이블을 생성할 때 엔진을 MyIsam으로 설정하면 트랜잭션 롤백 기능을 사용할 수 없다는 것을 알게 됨...

* Mysql 5.1 미만 버전은 아래 설정 사용

```bash
hibernate.dialect=org.hibernate.dialect.MySQLInnoDBDialect
```

* 5.1 이상 버전은 아래 설정 사용

```bash
hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect
```
